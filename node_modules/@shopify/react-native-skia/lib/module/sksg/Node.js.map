{"version":3,"names":["NodeType","isColorFilter","type","BlendColorFilter","MatrixColorFilter","LerpColorFilter","LumaColorFilter","SRGBToLinearGammaColorFilter","LinearToSRGBGammaColorFilter","isPathEffect","DiscretePathEffect","DashPathEffect","Path1DPathEffect","Path2DPathEffect","CornerPathEffect","SumPathEffect","Line2DPathEffect","isImageFilter","ImageFilter","OffsetImageFilter","DisplacementMapImageFilter","BlurImageFilter","DropShadowImageFilter","MorphologyImageFilter","BlendImageFilter","RuntimeShaderImageFilter","isShader","Shader","ImageShader","ColorShader","Turbulence","FractalNoise","LinearGradient","RadialGradient","SweepGradient","TwoPointConicalGradient","sortNodeChildren","parent","maskFilters","colorFilters","shaders","imageFilters","pathEffects","drawings","paints","children","forEach","node","push","BlurMaskFilter","Paint","Blend"],"sources":["Node.ts"],"sourcesContent":["import { NodeType } from \"../dom/types\";\n\nexport interface Node<Props = unknown> {\n  type: NodeType;\n  props: Props;\n  children: Node[];\n}\n\nexport const isColorFilter = (type: NodeType) => {\n  \"worklet\";\n  return (\n    type === NodeType.BlendColorFilter ||\n    type === NodeType.MatrixColorFilter ||\n    type === NodeType.LerpColorFilter ||\n    type === NodeType.LumaColorFilter ||\n    type === NodeType.SRGBToLinearGammaColorFilter ||\n    type === NodeType.LinearToSRGBGammaColorFilter\n  );\n};\n\nexport const isPathEffect = (type: NodeType) => {\n  \"worklet\";\n  return (\n    type === NodeType.DiscretePathEffect ||\n    type === NodeType.DashPathEffect ||\n    type === NodeType.Path1DPathEffect ||\n    type === NodeType.Path2DPathEffect ||\n    type === NodeType.CornerPathEffect ||\n    type === NodeType.SumPathEffect ||\n    type === NodeType.Line2DPathEffect\n  );\n};\n\nexport const isImageFilter = (type: NodeType) => {\n  \"worklet\";\n  return (\n    type === NodeType.ImageFilter ||\n    type === NodeType.OffsetImageFilter ||\n    type === NodeType.DisplacementMapImageFilter ||\n    type === NodeType.BlurImageFilter ||\n    type === NodeType.DropShadowImageFilter ||\n    type === NodeType.MorphologyImageFilter ||\n    type === NodeType.BlendImageFilter ||\n    type === NodeType.RuntimeShaderImageFilter\n  );\n};\n\nexport const isShader = (type: NodeType) => {\n  \"worklet\";\n  return (\n    type === NodeType.Shader ||\n    type === NodeType.ImageShader ||\n    type === NodeType.ColorShader ||\n    type === NodeType.Turbulence ||\n    type === NodeType.FractalNoise ||\n    type === NodeType.LinearGradient ||\n    type === NodeType.RadialGradient ||\n    type === NodeType.SweepGradient ||\n    type === NodeType.TwoPointConicalGradient\n  );\n};\n\nexport const sortNodeChildren = (parent: Node) => {\n  \"worklet\";\n  const maskFilters: Node[] = [];\n  const colorFilters: Node[] = [];\n  const shaders: Node[] = [];\n  const imageFilters: Node[] = [];\n  const pathEffects: Node[] = [];\n  const drawings: Node[] = [];\n  const paints: Node[] = [];\n  parent.children.forEach((node) => {\n    if (isColorFilter(node.type)) {\n      colorFilters.push(node);\n    } else if (node.type === NodeType.BlurMaskFilter) {\n      maskFilters.push(node);\n    } else if (isPathEffect(node.type)) {\n      pathEffects.push(node);\n    } else if (isImageFilter(node.type)) {\n      imageFilters.push(node);\n    } else if (isShader(node.type)) {\n      shaders.push(node);\n    } else if (node.type === NodeType.Paint) {\n      paints.push(node);\n    } else if (node.type === NodeType.Blend) {\n      if (node.children[0] && isImageFilter(node.children[0].type)) {\n        node.type = NodeType.BlendImageFilter;\n        imageFilters.push(node);\n      } else {\n        node.type = NodeType.Blend;\n        shaders.push(node);\n      }\n    } else {\n      drawings.push(node);\n    }\n  });\n  return {\n    colorFilters,\n    drawings,\n    maskFilters,\n    shaders,\n    pathEffects,\n    imageFilters,\n    paints,\n  };\n};\n"],"mappings":"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","ignoreList":[]}